<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, maximum-scale=1.0" />

    <title>A2: Multi-LED + Switch + PWM</title>

    <link href="style.css" rel="stylesheet" type="text/css" />
    <style>
      /* Force header content to stack vertically (rows) under the panda image */
      .header { display: block; }
      .header img { display: block; max-width: 100%; height: auto; margin-bottom: 1rem; }
      .header section { display: block; width: 100%; margin: 1rem 0; }
    </style>
  </head>
  <body>
    <h1>Assignment 2: Multi-LED + Switch + PWM</h1>
    <div class="header">
      <section id="overview">
        <h2>Overview</h2>
        <p>This assignment builds a multi‑LED circuit controlled by a physical input (button or tilt switch) and Arduino code that uses a for‑loop, digitalWrite(), digitalRead(), and analogWrite() (PWM). You will document the schematic, breadboard circuit, firmware, and an animated GIF of the behavior. Explanations include resistor choices (LEDs and button), battery‑life estimate, and a measured vs. theoretical LED forward‑voltage comparison.</p>
      </section>
      <section id="schematic">
        <h2>Schematic (with Resistor Calculation)</h2>
      </section>
      <section id="breadboard-circuit">
        <h2>Breadboard Circuit</h2>
        <p><img src="a2-circut.jpg" alt="Breadboard circuit photo" style="max-width:100%;height:auto;border-radius:8px;"></p>
        <p>This image shows my breadboard circuit with three LEDs and a button connected as described in the schematic. The white LED is made up of three separate LEDs combined.</p>
      </section>
      <section id="firmware-code">
        <h2>Firmware Code</h2>
        <p><em>Note:</em> Based on Arduino’s basic sketch template. Minor fixes were applied for correctness (using <code>pinMode()</code> to set LED pins as <code>OUTPUT</code>, and enabling <code>INPUT_PULLUP</code> for a stable button input if wired to ground).</p>
        <pre><code>// --- Note on template & wiring ---
// Based on Arduino’s basic sketch template. Comments are placed ABOVE each line.

// Pin setup 
// Define the digital pin used for the button
const int buttonPin = 2;  
// Store the current button state (HIGH = pressed in this wiring)
int buttonState = 0;      

// Runs once at startup 
// Configure pin 3 as OUTPUT for the Blue LED (PWM-capable)
void setup() {
  // Set Blue LED pin
  pinMode(3, OUTPUT);  
  // Set Green LED pin
  pinMode(5, OUTPUT);  
  // Set Red LED pin
  pinMode(6, OUTPUT);  
  // Enable internal pull-up on the button pin (reads HIGH when not connected to GND)
  pinMode(buttonPin, INPUT_PULLUP);  
}

// Runs repeatedly 
// Read the button state (HIGH = pressed for your wiring)
void loop() {
  // Capture current button value
  buttonState = digitalRead(buttonPin);

  // If the button is pressed, fade between colors (red→green→blue→red)
  if (buttonState == HIGH) {

    // Fade from red to green while button remains pressed
    for (int i = 0; i <= 255 && digitalRead(buttonPin) == HIGH; i++) {
      // Decrease red brightness as i increases
      analogWrite(6, 255 - i);  
      // Increase green brightness as i increases
      analogWrite(5, i);        
      // Keep blue off during this segment
      digitalWrite(3, LOW);     
      // Short delay for smooth transition
      delay(5);                 
    }

    // Fade from green to blue while button remains pressed
    for (int i = 0; i <= 255 && digitalRead(buttonPin) == HIGH; i++) {
      // Ensure red is off in this segment
      digitalWrite(6, LOW);     
      // Decrease green brightness
      analogWrite(5, 255 - i);  
      // Increase blue brightness
      analogWrite(3, i);        
      // Short delay for smooth transition
      delay(5);                 
    }

    // Fade from blue to red while button remains pressed
    for (int i = 0; i <= 255 && digitalRead(buttonPin) == HIGH; i++) {
      // Increase red brightness
      analogWrite(6, i);        
      // Ensure green is off
      digitalWrite(5, LOW);     
      // Decrease blue brightness
      analogWrite(3, 255 - i);  
      // Short delay for smooth transition
      delay(5);                 
    }

  } else {
    // When not pressed, fade only the blue LED up and down

    // Ramp blue from 0 → 255 (brighter)
    for (int v = 0; v <= 255; v++) {
      // Set blue brightness to v
      analogWrite(3, v);  
      // Short delay for smooth transition
      delay(5);
    }

    // Ramp blue from 255 → 0 (dimmer)
    for (int v = 255; v >= 0; v--) {
      // Set blue brightness to v
      analogWrite(3, v);  
      // Short delay for smooth transition
      delay(5);
    }

    // Ensure red and green are fully off during the blue fade
    digitalWrite(5, LOW);
    digitalWrite(6, LOW);
  }
}
</code></pre>
      </section>
      <section id="operation-gif">
        <h2>Operation GIF</h2>
        <p><img src="a2-gif.gif" alt="GIF showing the circuit in operation" style="max-width:100%;height:auto;border-radius:8px;"></p>
        <p>This GIF demonstrates the circuit in action, showing the LEDs cycling randomly when the button is pressed.</p>
      </section>
      <section id="questions-answers">
        <h2>Questions &amp; Answers (A2)</h2>
        <ol>
          <li>
            <strong>1: PWM chart — voltage across an LED for analogWrite(64), analogWrite(128), analogWrite(255).</strong>
          </li>
          <li>
            <strong>2: Battery‑life estimate for a 1200 mAh battery.</strong>
          </li>
          <li>
            <strong>3: Measured LED forward voltage vs. theoretical.</strong>
          </li>
          <li>
            <strong>4: AI tool usage.</strong>
          </li>
        </ol>
      </section>
      <section id="calculations">
        <h2>Calculations &amp; Rationale</h2>
        <h3>LED Resistor Selection</h3>
        <h3>Button Current Limiting</h3>
      </section>
      <section id="reflection">
        <h2>Reflection</h2>
      </section>
    </div>
  </body>
</html>
