<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, maximum-scale=1.0" />

    <title>A2: Multi-LED + Switch + PWM</title>

    <link href="style.css" rel="stylesheet" type="text/css" />
    <style>
      /* Force header content to stack vertically (rows) under the panda image */
      .header { display: block; }
      .header img { display: block; max-width: 100%; height: auto; margin-bottom: 1rem; }
      .header section { display: block; width: 100%; margin: 1rem 0; }
    </style>
  </head>
  <body>
    <h1>Assignment 2: Multi-LED + Switch + PWM</h1>
    <div class="header">
      <section id="overview">
        <h2>Overview</h2>
        <p>This assignment builds a multi‑LED circuit controlled by a physical input (button or tilt switch) and Arduino code that uses a for‑loop, digitalWrite(), digitalRead(), and analogWrite() (PWM). You will document the schematic, breadboard circuit, firmware, and an animated GIF of the behavior. Explanations include resistor choices (LEDs and button), battery‑life estimate, and a measured vs. theoretical LED forward‑voltage comparison.</p>
      </section>
      <section id="schematic">
        <h2>Schematic (with Resistor Calculation)</h2>
      </section>
      <section id="breadboard-circuit">
        <h2>Breadboard Circuit</h2>
        <p><img src="a2-circut.jpg" alt="Breadboard circuit photo" style="max-width:100%;height:auto;border-radius:8px;"></p>
        <p>This image shows my breadboard circuit with three LEDs and a button connected as described in the schematic. The white LED is made up of three separate LEDs combined.</p>
      </section>
      <section id="firmware-code">
        <h2>Firmware Code</h2>
        <p><em>Note:</em> Based on Arduino’s basic sketch template. Minor fixes were applied for correctness (using <code>pinMode()</code> to set LED pins as <code>OUTPUT</code>, and enabling <code>INPUT_PULLUP</code> for a stable button input if wired to ground).</p>
        <pre><code>// --- Pin & constant declarations ---
// Store the button pin number in a constant
const int buttonPin = 2;           // digital input for the button/tilt switch
// Variable to hold the current button reading
int buttonState = 0;               // will store HIGH/LOW from the button

// --- Arduino setup: runs once at power-up/reset ---
void setup() {
  // Set PWM-capable LED pins as OUTPUTs (3, 5, 6 drive LEDs through resistors)
  pinMode(3, OUTPUT);              // configure pin 3 for LED (red channel)
  pinMode(5, OUTPUT);              // configure pin 5 for LED (green channel)
  pinMode(6, OUTPUT);              // configure pin 6 for LED (blue/white channel)

  // Configure the button pin; use internal pull-up for stable reads (LOW = pressed)
  pinMode(buttonPin, INPUT_PULLUP);// enables internal resistor so no external pull-down needed
}

// --- Arduino loop: runs repeatedly ---
void loop() {
  // Read the current state of the button (LOW when pressed with INPUT_PULLUP)
  buttonState = digitalRead(buttonPin);   // capture HIGH/LOW from the input

  // If the button is pressed, show randomized PWM colors; else, turn LEDs off
  if (buttonState == LOW) {               // pressed/closed to GND when LOW
    // Repeat the random display a fixed number of times
    for (int i = 0; i < 10; i++) {        // for-loop executes 10 steps
      // Generate random PWM values (0–255) for each LED channel
      int redValue = random(0, 256);      // random duty for pin 3 (0=off, 255=full)
      int greenValue = random(0, 256);    // random duty for pin 5
      int blueValue = random(0, 256);     // random duty for pin 6

      // Apply the PWM values to the LEDs
      analogWrite(3, redValue);           // set brightness on pin 3
      analogWrite(5, greenValue);         // set brightness on pin 5
      analogWrite(6, blueValue);          // set brightness on pin 6

      // Hold the current color for half a second
      delay(500);                          // wait 500 ms before next random color
    }
  } else {
    // If not pressed, ensure all LEDs are off
    digitalWrite(3, LOW);                 // turn off LED on pin 3
    digitalWrite(5, LOW);                 // turn off LED on pin 5
    digitalWrite(6, LOW);                 // turn off LED on pin 6
  }
}
</code></pre>
      </section>
      <section id="operation-gif">
        <h2>Operation GIF</h2>
        <p><img src="a2-gif.gif" alt="GIF showing the circuit in operation" style="max-width:100%;height:auto;border-radius:8px;"></p>
        <p>This GIF demonstrates the circuit in action, showing the LEDs cycling randomly when the button is pressed.</p>
      </section>
      <section id="questions-answers">
        <h2>Questions &amp; Answers (A2)</h2>
        <ol>
          <li>
            <strong>1: PWM chart — voltage across an LED for analogWrite(64), analogWrite(128), analogWrite(255).</strong>
          </li>
          <li>
            <strong>2: Battery‑life estimate for a 1200 mAh battery.</strong>
          </li>
          <li>
            <strong>3: Measured LED forward voltage vs. theoretical.</strong>
          </li>
          <li>
            <strong>4: AI tool usage.</strong>
          </li>
        </ol>
      </section>
      <section id="calculations">
        <h2>Calculations &amp; Rationale</h2>
        <h3>LED Resistor Selection</h3>
        <h3>Button Current Limiting</h3>
      </section>
      <section id="reflection">
        <h2>Reflection</h2>
      </section>
    </div>
  </body>
</html>
